{% extends "base.html" %}
{% block content %}
    <div class="flex-grow py-10 px-20 flex flex-col">
        <div class="flex w-full flex-grow">
            <div class="flex flex-col gap-20 items-center flex-grow card bg-base-300 rounded-box px-8 py-10">
                <h1 class="text-4xl font-bold">Accounting</h1>
                <div class="stats shadow">
                    <div class="stat place-items-center">
                        <div class="stat-title">Occupation</div>
                        <div class="stat-value">{{ occupation }} %</div>
                        <div class="stat-desc">{{ occupied }} / total {{ spots }} spots</div>
                    </div>
                    <div class="stat place-items-center">
                        <div class="stat-title">Total Reservations</div>
                        <div class="stat-value text-secondary">{{ reservations|length }}</div>
                    </div>
                    <div class="stat place-items-center">
                        <div class="stat-title">Total Revenue</div>
                        <div class="stat-value">{{ revenue }} CHF</div>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="table">
                        <!-- head -->
                        <thead>
                            <tr>
                                <th></th>
                                <th>Date</th>
                                <th>Spot</th>
                                <th>User</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for res in reservations %}
                                <tr>
                                    <th>{{ loop.index }}</th>
                                    <td>{{ res.date }}</td>
                                    <td>{{ res.parking_spot.id }}</td>
                                    <td>{{ res.user.username }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
